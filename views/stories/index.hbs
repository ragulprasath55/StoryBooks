<script crossorigin="anonymous" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="/js/updateLike.js" type="text/javascript"></script>
    <script src="/js/script.js" type="text/javascript"></script>
<h1>Stories</h1>
<div class="row">
    {{#each stories}}
      <div class="col s12 m4">
          <div class="card">
              <div class="card-image">
                 {{{ editIcon user ../user _id }}} <!-- see line 77 in app.js ../user(to come out of each loop) is defined as global variable using middleware-->
              </div>
              <div class="card-content center-align">
                  <h5>{{title}}</h5>
                  <p>{{ stripTags (truncate body 150) }}</p>
                  <br>
                  <div class="chip">
                      <img src="{{user.image}}" alt="">
                       <a href="/stories/user/{{user._id}}">{{user.displayName}}</a>
                  </div>
                  <div class="like">                              
                    <button type="submit" class="btn blue like-button {{allowLike likedBy ../user}}" id="like-button-{{_id}}"  onclick="updateLike('{{_id}}')">
                        <i class="fas fa-thumbs-up"></i>
                    </button>
                    <div class="liked" id="liked-{{_id}}"></div>
                    {{#if (equal likes 2)}}
                        <div class="likes-count" id="likes-count-{{_id}}">{{likes}} People likes this story</div>
                    {{/if}}
                  </div>
              </div>
          </div>
          <div class="card-action center-align">
              <a href="/stories/{{_id}}" class="btn grey">Read More</a>
          </div>
      </div>
      {{else}}
         <p>There are no stories to display</p>
      {{/each}}
</div>

